<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام إدارة التأشيرات - مكتب أمان للسفريات والسياحة</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #3498db;
            --accent: #e67e22;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            --gradient-primary: linear-gradient(135deg, #1a5276, #2c81ba);
            --gradient-secondary: linear-gradient(135deg, #3498db, #1a5276);
            --gradient-accent: linear-gradient(135deg, #e67e22, #f39c12);
            --gradient-success: linear-gradient(135deg, #27ae60, #2ecc71);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            width: 95%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--gradient-primary);
            color: white;
            padding: 25px 0;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            position: relative;
            gap: 15px;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .header-text h1 {
            margin-bottom: 5px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .header-text p {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .database-info {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
        }
        
        .last-update {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 25px;
            margin-bottom: 25px;
            transition: var(--transition);
            border-top: 4px solid var(--secondary);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }
        
        .card h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .required::after {
            content: " *";
            color: var(--danger);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            background: #fafafa;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            background: white;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 6px;
            transition: var(--transition);
        }
        
        .checkbox-item:hover {
            background: #e9ecef;
        }
        
        .checkbox-item input {
            width: auto;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #219955;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-warning:hover {
            background-color: #d68910;
        }
        
        .btn-info {
            background-color: var(--info);
        }
        
        .btn-info:hover {
            background-color: #138496;
        }
        
        .btn-light {
            background-color: var(--light);
            color: var(--dark);
        }
        
        .btn-light:hover {
            background-color: #dde4e6;
        }
        
        .btn-accent {
            background-color: var(--accent);
        }
        
        .btn-accent:hover {
            background-color: #d35400;
        }
        
        .actions {
            display: flex;
            gap: 12px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 14px 16px;
            text-align: right;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background-color: var(--light);
            font-weight: 600;
            position: sticky;
            top: 0;
            color: var(--primary);
        }
        
        tr {
            transition: var(--transition);
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .search-container {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }
        
        .search-container input {
            flex: 1;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 180px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            width: 95%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        
        .close {
            font-size: 24px;
            cursor: pointer;
            color: #777;
            transition: var(--transition);
        }
        
        .close:hover {
            color: var(--danger);
            transform: rotate(90deg);
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            font-weight: 500;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .no-data {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }
        
        .no-data i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            font-weight: 600;
            color: #666;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--secondary);
            color: var(--secondary);
        }
        
        .tab:hover:not(.active) {
            background-color: #f5f5f5;
            color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            border-top: 4px solid var(--secondary);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }
        
        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .stat-card .value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-card .label {
            color: #777;
            font-size: 0.95rem;
        }
        
        .requirements-list {
            list-style-type: none;
            padding: 0;
        }
        
        .requirements-list li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            transition: var(--transition);
        }
        
        .requirements-list li:hover {
            background-color: #f9f9f9;
            padding-right: 10px;
        }
        
        .requirements-list li:last-child {
            border-bottom: none;
        }
        
        .requirements-list li i {
            margin-left: 10px;
            color: var(--success);
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .badge-tourist {
            background-color: #e8f4fd;
            color: var(--secondary);
        }
        
        .badge-business {
            background-color: #e6f7ed;
            color: var(--success);
        }
        
        .badge-student {
            background-color: #fef7e0;
            color: var(--warning);
        }
        
        .badge-medical {
            background-color: #fde8e8;
            color: var(--danger);
        }
        
        .badge-transit {
            background-color: #e6f3f7;
            color: var(--info);
        }
        
        .badge-diplomatic {
            background-color: #f0e6f7;
            color: #8e44ad;
        }
        
        .table-container {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 5px;
        }
        
        .status-active {
            background-color: var(--success);
        }
        
        .status-inactive {
            background-color: var(--danger);
        }
        
        .status-pending {
            background-color: var(--warning);
        }
        
        .file-controls {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        
        .help-text {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .copy-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            z-index: 1001;
            display: none;
            font-weight: 500;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--card-shadow);
        }
        
        .dashboard-card h3 {
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 1px solid #eee;
            padding-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .visa-type-chart {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .visa-type-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .visa-type-bar {
            height: 10px;
            background: var(--secondary);
            border-radius: 5px;
            margin-top: 5px;
        }
        
        .visa-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .detail-item:hover {
            background: #e9ecef;
        }
        
        .detail-label {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .detail-value {
            color: #555;
            font-size: 1rem;
        }
        
        .requirements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .requirement-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: #f0f8ff;
            border-radius: 6px;
            transition: var(--transition);
        }
        
        .requirement-item:hover {
            background: #e1f0ff;
        }
        
        .requirement-item i {
            color: var(--success);
        }
        
        .share-options {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 100px;
            text-align: center;
            flex: 1;
        }
        
        .share-option:hover {
            background: #e9ecef;
            transform: translateY(-3px);
        }
        
        .share-option i {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
            flex-direction: column;
            gap: 20px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--secondary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .advanced-filters {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        
        .advanced-filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .toggle-filters {
            background: transparent;
            border: none;
            cursor: pointer;
            color: var(--secondary);
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filters-content {
            display: none;
        }
        
        .filters-content.active {
            display: block;
        }
        
        .range-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .range-filter {
            display: flex;
            flex-direction: column;
        }
        
        .range-values {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .quick-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 15px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            border-top: 4px solid var(--secondary);
        }
        
        .quick-action-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-top-color: var(--accent);
        }
        
        .quick-action-btn i {
            font-size: 28px;
            margin-bottom: 12px;
            color: var(--secondary);
        }
        
        .quick-action-btn span {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .agency-footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--border-radius);
        }
        
        .agency-footer p {
            margin-bottom: 5px;
        }
        
        .agency-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        /* تحسينات للاستجابة على جميع الشاشات */
        @media (max-width: 1200px) {
            .container {
                width: 98%;
                padding: 15px;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-section {
                justify-content: center;
            }
        }
        
        @media (max-width: 992px) {
            .form-section {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .filters {
                flex-direction: column;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
                justify-content: center;
            }
            
            .database-info, .last-update {
                width: 100%;
                justify-content: center;
                margin-top: 10px;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .visa-details {
                grid-template-columns: 1fr;
            }
            
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .card {
                padding: 20px;
            }
        }
        
        @media (max-width: 576px) {
            .header-text h1 {
                font-size: 1.5rem;
            }
            
            .header-text p {
                font-size: 0.9rem;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .table-container {
                font-size: 0.9rem;
            }
            
            th, td {
                padding: 10px 12px;
            }
        }
        
        /* تحسينات إضافية للجدول على الشاشات الصغيرة */
        @media (max-width: 480px) {
            .table-container {
                overflow-x: auto;
            }
            
            table {
                min-width: 600px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>جاري تحميل البيانات...</p>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-passport"></i>
                    </div>
                    <div class="header-text">
                        <h1>نظام إدارة التأشيرات</h1>
                        <p>مكتب أمان للسفريات والسياحة - بيانات موحدة لجميع الموظفين</p>
                    </div>
                </div>
                
                <div class="header-info">
                    <div class="database-info">
                        <i class="fas fa-database"></i>
                        <span id="databaseStatus">جار التحميل...</span>
                    </div>
                    <div class="last-update">
                        <i class="fas fa-clock"></i>
                        <span id="lastUpdateText">جار التحميل...</span>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="alert alert-success" id="successAlert"></div>
        <div class="alert alert-danger" id="errorAlert"></div>
        <div class="copy-notification" id="copyNotification">تم النسخ إلى الحافظة</div>
        
        <div class="file-controls">
            <div class="actions">
                <button class="btn btn-success" id="loadData"><i class="fas fa-download"></i> تحميل البيانات</button>
                <button class="btn btn-info" id="downloadData"><i class="fas fa-file-download"></i> تحميل ملف البيانات</button>
                <button class="btn btn-light" id="exportJson"><i class="fas fa-file-code"></i> تصدير JSON</button>
                <button class="btn btn-light" id="exportCsv"><i class="fas fa-file-csv"></i> تصدير CSV</button>
                <button class="btn btn-warning" id="importData"><i class="fas fa-file-upload"></i> استيراد بيانات</button>
            </div>
            <p class="help-text">البيانات مخزنة في ملف <strong>trip_data.json</strong> في نفس مجلد الصفحة</p>
        </div>
        
        <div class="stats-cards">
            <div class="stat-card">
                <i class="fas fa-globe-americas"></i>
                <div class="value" id="totalCountries">0</div>
                <div class="label">إجمالي الدول</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-file-contract"></i>
                <div class="value" id="totalVisas">0</div>
                <div class="label">إجمالي التأشيرات</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-coins"></i>
                <div class="value" id="avgFees">$0</div>
                <div class="label">متوسط الرسوم</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-clock"></i>
                <div class="value" id="avgProcessing">0</div>
                <div class="label">متوسط مدة المعالجة (أيام)</div>
            </div>
        </div>
        
        <div class="quick-actions">
            <div class="quick-action-btn" data-tab="data-entry">
                <i class="fas fa-plus-circle"></i>
                <span>إضافة تأشيرة</span>
            </div>
            <div class="quick-action-btn" data-tab="data-view">
                <i class="fas fa-table"></i>
                <span>عرض البيانات</span>
            </div>
            <div class="quick-action-btn" data-tab="dashboard">
                <i class="fas fa-chart-bar"></i>
                <span>لوحة التحكم</span>
            </div>
            <div class="quick-action-btn" data-tab="requirements">
                <i class="fas fa-tasks"></i>
                <span>المتطلبات</span>
            </div>
        </div>

        <div class="tab-content active" id="data-entry">
            <div class="card">
                <h2><i class="fas fa-passport"></i> إضافة بيانات تأشيرة جديدة</h2>
                <form id="visaForm">
                    <div class="form-section">
                        <div>
                            <div class="form-group">
                                <label for="country" class="required">الدولة</label>
                                <input type="text" id="country" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="embassy" class="required">السفارة / القنصلية</label>
                                <input type="text" id="embassy" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="visaType" class="required">نوع التأشيرة</label>
                                <select id="visaType" required>
                                    <option value="">اختر نوع التأشيرة</option>
                                    <option value="سياحية">سياحية</option>
                                    <option value="عمل">عمل</option>
                                    <option value="دراسية">دراسية</option>
                                    <option value="علاج">علاج</option>
                                    <option value="عبور">عبور</option>
                                    <option value="دبلوماسية">دبلوماسية</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="processingTime">مدة المعالجة (أيام)</label>
                                <input type="number" id="processingTime" min="1" placeholder="مثال: 14">
                            </div>
                        </div>
                        
                        <div>
                            <div class="form-group">
                                <label for="fees">رسوم التأشيرة ($)</label>
                                <input type="number" id="fees" min="0" step="0.01" placeholder="مثال: 150.00">
                            </div>
                            
                            <div class="form-group">
                                <label for="validity">فترة الصلاحية (أيام)</label>
                                <input type="number" id="validity" min="1" placeholder="مثال: 90">
                            </div>
                            
                            <div class="form-group">
                                <label for="entryType">نوع الدخول</label>
                                <select id="entryType">
                                    <option value="">اختر نوع الدخول</option>
                                    <option value="مرة واحدة">مرة واحدة</option>
                                    <option value="متعدد الدخول">متعدد الدخول</option>
                                    <option value="مزدوج">مزدوج</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="status">حالة الطلب</label>
                                <select id="status">
                                    <option value="نشط">نشط</option>
                                    <option value="غير نشط">غير نشط</option>
                                    <option value="معلق">معلق</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="requirements">متطلبات التأشيرة الأساسية</label>
                        <div class="checkbox-group" id="basicRequirements">
                            <!-- سيتم ملؤها بالجافاسكريبت -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalRequirements">متطلبات إضافية</label>
                        <textarea id="additionalRequirements" placeholder="أدخل أي متطلبات إضافية للتأشيرة..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">ملاحظات إضافية</label>
                        <textarea id="notes" placeholder="أدخل أي ملاحظات إضافية..."></textarea>
                    </div>
                    
                    <div class="actions">
                        <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> حفظ البيانات</button>
                        <button type="button" class="btn" id="resetForm"><i class="fas fa-broom"></i> تفريغ النموذج</button>
                        <button type="button" class="btn btn-info" id="autoFillBtn"><i class="fas fa-magic"></i> تعبئة تلقائية</button>
                    </div>
                </form>
            </div>
        </div>
        
        <div class="tab-content" id="data-view">
            <div class="card">
                <h2><i class="fas fa-table"></i> عرض بيانات التأشيرات</h2>
                
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="ابحث عن دولة أو نوع تأشيرة أو سفارة...">
                    <button class="btn" id="searchBtn"><i class="fas fa-search"></i> بحث</button>
                </div>
                
                <div class="advanced-filters">
                    <div class="advanced-filters-header">
                        <h3>التصفية المتقدمة</h3>
                        <button class="toggle-filters" id="toggleFilters">
                            <i class="fas fa-sliders-h"></i> إظهار/إخفاء التصفية المتقدمة
                        </button>
                    </div>
                    <div class="filters-content" id="filtersContent">
                        <div class="range-filters">
                            <div class="range-filter">
                                <label for="filterFeesMin">الرسوم ($)</label>
                                <input type="range" id="filterFeesMin" min="0" max="1000" value="0">
                                <input type="range" id="filterFeesMax" min="0" max="1000" value="1000">
                                <div class="range-values">
                                    <span id="feesMinValue">0</span>
                                    <span id="feesMaxValue">1000</span>
                                </div>
                            </div>
                            
                            <div class="range-filter">
                                <label for="filterProcessingMin">مدة المعالجة (أيام)</label>
                                <input type="range" id="filterProcessingMin" min="0" max="90" value="0">
                                <input type="range" id="filterProcessingMax" min="0" max="90" value="90">
                                <div class="range-values">
                                    <span id="processingMinValue">0</span>
                                    <span id="processingMaxValue">90</span>
                                </div>
                            </div>
                            
                            <div class="range-filter">
                                <label for="filterValidityMin">فترة الصلاحية (أيام)</label>
                                <input type="range" id="filterValidityMin" min="0" max="365" value="0">
                                <input type="range" id="filterValidityMax" min="0" max="365" value="365">
                                <div class="range-values">
                                    <span id="validityMinValue">0</span>
                                    <span id="validityMaxValue">365</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="filters">
                    <div class="filter-group">
                        <label for="filterType">تصفية حسب النوع</label>
                        <select id="filterType">
                            <option value="">جميع الأنواع</option>
                            <option value="سياحية">سياحية</option>
                            <option value="عمل">عمل</option>
                            <option value="دراسية">دراسية</option>
                            <option value="علاج">علاج</option>
                            <option value="عبور">عبور</option>
                            <option value="دبلوماسية">دبلوماسية</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filterCountry">تصفية حسب الدولة</label>
                        <input type="text" id="filterCountry" placeholder="اسم الدولة">
                    </div>
                    
                    <div class="filter-group">
                        <label for="filterStatus">تصفية حسب الحالة</label>
                        <select id="filterStatus">
                            <option value="">جميع الحالات</option>
                            <option value="نشط">نشط</option>
                            <option value="غير نشط">غير نشط</option>
                            <option value="معلق">معلق</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="sortBy">ترتيب حسب</label>
                        <select id="sortBy">
                            <option value="country">الدولة (أ-ي)</option>
                            <option value="countryDesc">الدولة (ي-أ)</option>
                            <option value="fees">الرسوم (منخفضة-عالية)</option>
                            <option value="feesDesc">الرسوم (عالية-منخفضة)</option>
                            <option value="processingTime">مدة المعالجة (قصيرة-طويلة)</option>
                            <option value="processingTimeDesc">مدة المعالجة (طويلة-قصيرة)</option>
                        </select>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="visaTable">
                        <thead>
                            <tr>
                                <th>الدولة</th>
                                <th>السفارة</th>
                                <th>نوع التأشيرة</th>
                                <th>المتطلبات</th>
                                <th>مدة المعالجة</th>
                                <th>الرسوم ($)</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="visaTableBody">
                            <!-- سيتم ملء هذا القسم بالبيانات من JavaScript -->
                        </tbody>
                    </table>
                    <div class="no-data" id="noDataMessage">
                        <i class="fas fa-database"></i>
                        <p>لا توجد بيانات لعرضها. يرجى إضافة بيانات جديدة.</p>
                    </div>
                </div>
                
                <div class="actions">
                    <button class="btn" id="refreshData"><i class="fas fa-sync-alt"></i> تحديث البيانات</button>
                    <button class="btn btn-danger" id="clearAllBtn"><i class="fas fa-trash-alt"></i> حذف جميع البيانات</button>
                    <button class="btn btn-info" id="copyTableBtn"><i class="fas fa-copy"></i> نسخ الجدول</button>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="dashboard">
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-pie"></i> توزيع أنواع التأشيرات</h3>
                    <div class="visa-type-chart" id="visaTypeChart">
                        <!-- سيتم ملؤها بالجافاسكريبت -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-flag"></i> الدول الأكثر طلباً</h3>
                    <div id="topCountries">
                        <!-- سيتم ملؤها بالجافاسكريبت -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-history"></i> آخر التحديثات</h3>
                    <div id="recentUpdates">
                        <!-- سيتم ملؤها بالجافاسكريبت -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="requirements">
            <div class="card">
                <h2><i class="fas fa-tasks"></i> المتطلبات الشائعة للتأشيرات</h2>
                <div class="form-section">
                    <div>
                        <h3>المتطلبات الأساسية</h3>
                        <ul class="requirements-list" id="commonRequirements">
                            <!-- سيتم ملؤها بالجافاسكريبت -->
                        </ul>
                    </div>
                    <div>
                        <h3>نصائح للحصول على التأشيرة</h3>
                        <ul class="requirements-list" id="visaTips">
                            <!-- سيتم ملؤها بالجافاسكريبت -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- نموذج التعديل -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> تعديل بيانات التأشيرة</h2>
                <span class="close">&times;</span>
            </div>
            <form id="editForm">
                <input type="hidden" id="editId">
                <div class="form-section">
                    <div>
                        <div class="form-group">
                            <label for="editCountry" class="required">الدولة</label>
                            <input type="text" id="editCountry" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="editEmbassy" class="required">السفارة / القنصلية</label>
                            <input type="text" id="editEmbassy" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="editVisaType" class="required">نوع التأشيرة</label>
                            <select id="editVisaType" required>
                                <option value="">اختر نوع التأشيرة</option>
                                <option value="سياحية">سياحية</option>
                                <option value="عمل">عمل</option>
                                <option value="دراسية">دراسية</option>
                                <option value="علاج">علاج</option>
                                <option value="عبور">عبور</option>
                                <option value="دبلوماسية">دبلوماسية</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="editProcessingTime">مدة المعالجة (أيام)</label>
                            <input type="number" id="editProcessingTime" min="1">
                        </div>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label for="editFees">رسوم التأشيرة ($)</label>
                            <input type="number" id="editFees" min="0" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label for="editValidity">فترة الصلاحية (أيام)</label>
                            <input type="number" id="editValidity" min="1">
                        </div>
                        
                        <div class="form-group">
                            <label for="editEntryType">نوع الدخول</label>
                            <select id="editEntryType">
                                <option value="">اختر نوع الدخول</option>
                                <option value="مرة واحدة">مرة واحدة</option>
                                <option value="متعدد الدخول">متعدد الدخول</option>
                                <option value="مزدوج">مزدوج</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="editStatus">حالة الطلب</label>
                            <select id="editStatus">
                                <option value="نشط">نشط</option>
                                <option value="غير نشط">غير نشط</option>
                                <option value="معلق">معلق</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editRequirements">متطلبات التأشيرة الأساسية</label>
                    <div class="checkbox-group" id="editBasicRequirements">
                        <!-- سيتم ملؤها بالجافاسكريبت -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editAdditionalRequirements">متطلبات إضافية</label>
                    <textarea id="editAdditionalRequirements" placeholder="أدخل أي متطلبات إضافية للتأشيرة..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editNotes">ملاحظات إضافية</label>
                    <textarea id="editNotes" placeholder="أدخل أي ملاحظات إضافية..."></textarea>
                </div>
                
                <div class="actions">
                    <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> حفظ التعديلات</button>
                    <button type="button" class="btn btn-danger" id="cancelEdit"><i class="fas fa-times"></i> إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <!-- نموذج عرض التفاصيل والمشاركة -->
    <div class="modal" id="detailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-info-circle"></i> تفاصيل التأشيرة</h2>
                <span class="close">&times;</span>
            </div>
            <div id="visaDetailsContent">
                <!-- سيتم ملؤها بالجافاسكريبت -->
            </div>
            <div class="share-options">
                <div class="share-option" id="copyVisaDetails">
                    <i class="fas fa-copy"></i>
                    <span>نسخ البيانات</span>
                </div>
                <div class="share-option" id="shareVisaDetails">
                    <i class="fas fa-share-alt"></i>
                    <span>مشاركة</span>
                </div>
                <div class="share-option" id="printVisaDetails">
                    <i class="fas fa-print"></i>
                    <span>طباعة</span>
                </div>
            </div>
        </div>
    </div>

    <!-- نموذج استيراد البيانات -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> استيراد بيانات التأشيرات</h2>
                <span class="close">&times;</span>
            </div>
            <div class="form-group">
                <label for="importFile">اختر ملف JSON لاستيراد البيانات</label>
                <input type="file" id="importFile" accept=".json">
            </div>
            <div class="form-group">
                <label for="importMethod">طريقة الاستيراد</label>
                <select id="importMethod">
                    <option value="merge">دمج البيانات (إضافة جديدة فقط)</option>
                    <option value="replace">استبدال جميع البيانات</option>
                </select>
            </div>
            <div class="actions">
                <button class="btn btn-success" id="confirmImport"><i class="fas fa-file-import"></i> استيراد البيانات</button>
                <button class="btn btn-danger" id="cancelImport"><i class="fas fa-times"></i> إلغاء</button>
            </div>
        </div>
    </div>

    <div class="agency-footer">
        <div class="agency-name">مكتب أمان للسفريات والسياحة</div>
        <p>نظام إدارة التأشيرات - الإصدار 2.0</p>
        <p>جميع الحقوق محفوظة &copy; 2023</p>
    </div>

    <script>
        // بيانات التطبيق
        let visaData = [];
        let currentEditId = null;
        let currentVisaDetails = null;
        
        // متطلبات التأشيرة الأساسية - كاملة بدون نقص
        const basicRequirementsList = [
            "جواز سفر ساري المفعول",
            "صور شخصية",
            "نموذج طلب تأشيرة مكتمل",
            "حجز فندق",
            "تذكرة طيران ذهاب وعودة",
            "كشف حساب بنكي",
            "تأمين صحي",
            "شهادة عمل",
            "دعوة رسمية (إن وجدت)",
            "سجل عدلي",
            "صور من صفحات جواز السفر",
            "إثبات الإقامة",
            "خطاب تغطية",
            "إثبات العلاقات العائلية (للتأشيرات العائلية)",
            "شهادة الميلاد (للتأشيرات العائلية)",
            "كشف الدرجات (للتأشيرات الدراسية)",
            "قبول جامعي (للتأشيرات الدراسية)",
            "شهادة طبية (للتأشيرات العلاجية)",
            "حجز مستشفى (للتأشيرات العلاجية)"
        ];
        
        // المتطلبات الشائعة
        const commonRequirements = [
            "تأكد من صلاحية جواز سفرك (6 أشهر على الأقل)",
            "احصل على صور شخصية وفقاً للمواصفات المطلوبة",
            "احفظ نسخة من جميع المستندات المقدمة",
            "تأكد من دقة المعلومات في نموذج الطلب",
            "احصل على التأمين الصحي المناسب",
            "تأكد من توفر الأموال الكافية لإثبات الإقامة",
            "راجع متطلبات الدولة المحددة قبل التقديم",
            "احصل على موعد مسبق من السفارة أو مركز التأشيرات",
            "تأكد من ترجمة جميع المستندات المطلوبة",
            "احضر المستندات الأصلية مع نسخ منها للمقابلة"
        ];
        
        // نصائح للحصول على التأشيرة
        const visaTips = [
            "قدم الطلب قبل موعد السفر بفترة كافية",
            "راجع المتطلبات المحددة للدولة التي تريد زيارتها",
            "كن صادقاً ودقيقاً في تقديم المعلومات",
            "احتفظ بسجل سفر جيد (للمسافرين الدائمين)",
            "استشر مكتب التأشيرات أو سفارة الدولة للاستفسارات",
            "تأكد من أن جميع المستندات مترجمة إذا لزم الأمر",
            "احرص على حضور المقابلة في الوقت المحدد",
            "تأكد من دفع رسوم التأشيرة بالطريقة الصحيحة",
            "احتفظ برقم طلب التأشيرة للمتابعة",
            "تابع حالة طلبك عبر الإنترنت إن أمكن"
        ];
        
        // عناصر DOM
        const visaForm = document.getElementById('visaForm');
        const editForm = document.getElementById('editForm');
        const visaTableBody = document.getElementById('visaTableBody');
        const noDataMessage = document.getElementById('noDataMessage');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const filterType = document.getElementById('filterType');
        const filterCountry = document.getElementById('filterCountry');
        const filterStatus = document.getElementById('filterStatus');
        const sortBy = document.getElementById('sortBy');
        const loadDataBtn = document.getElementById('loadData');
        const downloadDataBtn = document.getElementById('downloadData');
        const refreshDataBtn = document.getElementById('refreshData');
        const clearAllBtn = document.getElementById('clearAllBtn');
        const editModal = document.getElementById('editModal');
        const detailsModal = document.getElementById('detailsModal');
        const importModal = document.getElementById('importModal');
        const resetFormBtn = document.getElementById('resetForm');
        const autoFillBtn = document.getElementById('autoFillBtn');
        const successAlert = document.getElementById('successAlert');
        const errorAlert = document.getElementById('errorAlert');
        const copyNotification = document.getElementById('copyNotification');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const basicRequirementsContainer = document.getElementById('basicRequirements');
        const editBasicRequirementsContainer = document.getElementById('editBasicRequirements');
        const commonRequirementsContainer = document.getElementById('commonRequirements');
        const visaTipsContainer = document.getElementById('visaTips');
        const databaseStatus = document.getElementById('databaseStatus');
        const lastUpdateText = document.getElementById('lastUpdateText');
        const exportJsonBtn = document.getElementById('exportJson');
        const exportCsvBtn = document.getElementById('exportCsv');
        const copyTableBtn = document.getElementById('copyTableBtn');
        const quickActionBtns = document.querySelectorAll('.quick-action-btn');
        const visaDetailsContent = document.getElementById('visaDetailsContent');
        const copyVisaDetailsBtn = document.getElementById('copyVisaDetails');
        const shareVisaDetailsBtn = document.getElementById('shareVisaDetails');
        const printVisaDetailsBtn = document.getElementById('printVisaDetails');
        const importDataBtn = document.getElementById('importData');
        const importFile = document.getElementById('importFile');
        const importMethod = document.getElementById('importMethod');
        const confirmImportBtn = document.getElementById('confirmImport');
        const cancelImportBtn = document.getElementById('cancelImport');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const toggleFiltersBtn = document.getElementById('toggleFilters');
        const filtersContent = document.getElementById('filtersContent');

        // عناصر التصفية المتقدمة
        const filterFeesMin = document.getElementById('filterFeesMin');
        const filterFeesMax = document.getElementById('filterFeesMax');
        const filterProcessingMin = document.getElementById('filterProcessingMin');
        const filterProcessingMax = document.getElementById('filterProcessingMax');
        const filterValidityMin = document.getElementById('filterValidityMin');
        const filterValidityMax = document.getElementById('filterValidityMax');
        const feesMinValue = document.getElementById('feesMinValue');
        const feesMaxValue = document.getElementById('feesMaxValue');
        const processingMinValue = document.getElementById('processingMinValue');
        const processingMaxValue = document.getElementById('processingMaxValue');
        const validityMinValue = document.getElementById('validityMinValue');
        const validityMaxValue = document.getElementById('validityMaxValue');

        // إحصائيات
        const totalCountriesElement = document.getElementById('totalCountries');
        const totalVisasElement = document.getElementById('totalVisas');
        const avgFeesElement = document.getElementById('avgFees');
        const avgProcessingElement = document.getElementById('avgProcessing');

        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', function() {
            initializeRequirements();
            initializeAdvancedFilters();
            loadDataFromLocalStorage(); // تحميل البيانات من localStorage تلقائياً عند فتح الصفحة
            
            // إضافة مستمعي الأحداث
            visaForm.addEventListener('submit', handleFormSubmit);
            editForm.addEventListener('submit', handleEditSubmit);
            searchBtn.addEventListener('click', handleSearch);
            filterType.addEventListener('change', renderTable);
            filterCountry.addEventListener('input', renderTable);
            filterStatus.addEventListener('change', renderTable);
            sortBy.addEventListener('change', renderTable);
            loadDataBtn.addEventListener('click', loadDataFromFile);
            downloadDataBtn.addEventListener('click', downloadDataFile);
            refreshDataBtn.addEventListener('click', loadDataFromFile);
            clearAllBtn.addEventListener('click', handleClearAll);
            resetFormBtn.addEventListener('click', resetForm);
            autoFillBtn.addEventListener('click', autoFillForm);
            exportJsonBtn.addEventListener('click', exportToJson);
            exportCsvBtn.addEventListener('click', exportToCsv);
            copyTableBtn.addEventListener('click', copyTableToClipboard);
            copyVisaDetailsBtn.addEventListener('click', copyVisaDetailsToClipboard);
            shareVisaDetailsBtn.addEventListener('click', shareVisaDetails);
            printVisaDetailsBtn.addEventListener('click', printVisaDetails);
            importDataBtn.addEventListener('click', showImportModal);
            confirmImportBtn.addEventListener('click', handleImport);
            cancelImportBtn.addEventListener('click', () => importModal.style.display = 'none');
            toggleFiltersBtn.addEventListener('click', toggleAdvancedFilters);
            
            // إغلاق النماذج
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            document.getElementById('cancelEdit').addEventListener('click', function() {
                editModal.style.display = 'none';
            });
            
            // التبديل بين التبويبات
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchToTab(tabId);
                });
            });
            
            // إجراءات سريعة
            quickActionBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchToTab(tabId);
                });
            });
            
            // البحث أثناء الكتابة
            searchInput.addEventListener('input', handleSearch);
            
            // التصفية المتقدمة
            filterFeesMin.addEventListener('input', updateFeesRange);
            filterFeesMax.addEventListener('input', updateFeesRange);
            filterProcessingMin.addEventListener('input', updateProcessingRange);
            filterProcessingMax.addEventListener('input', updateProcessingRange);
            filterValidityMin.addEventListener('input', updateValidityRange);
            filterValidityMax.addEventListener('input', updateValidityRange);
            
            // حفظ البيانات تلقائياً قبل إغلاق الصفحة
            window.addEventListener('beforeunload', function() {
                saveDataToLocalStorage();
            });
        });
        
        // تهيئة متطلبات التأشيرة - كاملة بدون نقص
        function initializeRequirements() {
            // تهيئة المتطلبات الأساسية في نموذج الإضافة
            basicRequirementsContainer.innerHTML = basicRequirementsList.map(req => `
                <div class="checkbox-item">
                    <input type="checkbox" id="req_${basicRequirementsList.indexOf(req)}" value="${req}">
                    <label for="req_${basicRequirementsList.indexOf(req)}">${req}</label>
                </div>
            `).join('');
            
            // تهيئة المتطلبات الأساسية في نموذج التعديل
            editBasicRequirementsContainer.innerHTML = basicRequirementsList.map(req => `
                <div class="checkbox-item">
                    <input type="checkbox" id="edit_req_${basicRequirementsList.indexOf(req)}" value="${req}">
                    <label for="edit_req_${basicRequirementsList.indexOf(req)}">${req}</label>
                </div>
            `).join('');
            
            // تهيئة المتطلبات الشائعة
            commonRequirementsContainer.innerHTML = commonRequirements.map(req => `
                <li><i class="fas fa-check-circle"></i> ${req}</li>
            `).join('');
            
            // تهيئة نصائح التأشيرة
            visaTipsContainer.innerHTML = visaTips.map(tip => `
                <li><i class="fas fa-lightbulb"></i> ${tip}</li>
            `).join('');
        }
        
        // باقي الوظائف تبقى كما هي بدون تغيير
        // ... (جميع الوظائف الأخرى تبقى كما هي)
        
        // وظيفة لتحويل التاريخ إلى الميلادي
        function formatGregorianDate(dateString) {
            const date = new Date(dateString);
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return date.toLocaleDateString('ar-SA', options);
        }
        
        // وظيفة لتنسيق التاريخ في الجدول
        function formatTableDate(dateString) {
            const date = new Date(dateString);
            const options = {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            };
            return date.toLocaleDateString('ar-SA', options);
        }
        
        // تحديث وقت التحديث الأخير
        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-SA');
            const dateString = now.toLocaleDateString('ar-SA', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            lastUpdateText.textContent = `آخر تحديث: ${timeString} - ${dateString}`;
        }
        
        // باقي الوظائف (نفس الوظائف السابقة)
        // ... (جميع الوظائف الأخرى تبقى كما هي)
        
    </script>
</body>
</html>
